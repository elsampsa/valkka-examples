<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About Valkka &mdash; Python Media Streaming Framework for Linux  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supported hardware" href="hardware.html" />
    <link rel="prev" title="Valkka" href="index.html" />
<!-- as per https://stackoverflow.com/questions/23211695/modifying-content-width-of-the-sphinx-theme-read-the-docs -->
<link href="_static/rtd_override.css" rel="stylesheet" type="text/css">
<script src="https://kit.fontawesome.com/1f90d3565b.js" crossorigin="anonymous"></script>

<style>
    .list-container {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        color: #333;
        line-height: 1.6;
        margin-bottom: 20px;
    }
    .list-container ul {
        list-style: none; /* Remove bullets */
        padding: 0; /* Remove default padding */
    }
    .list-container ul li {
        margin-bottom: 8px;
        text-align: left; /* Align text to the left */
        color: white; /* Set text color to white */
        margin-left: 20px; /* Add margin to the left */
    }
    /* Style hyperlinks within .list-container */
    .list-container a {
        color: white; /* Default color */
        text-decoration: none; /* Remove underline */
    }

    /* Change hyperlink color on hover within .list-container */
    .list-container a:hover {
        color: grey; /* Color when hovered over */
    }
</style>


</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

<!--
  <a href="index.html" class="icon icon-home"> Python Media Streaming Framework for Linux
-->

<!--

NO LOGO
-->

<!--
NOTE: we are starting to have "version creep" here..  at the moment, with Sphinx==7.2.6 and sphinx-rtd-theme==1.3.0 the only thing that
works is this:
-->
<a href="index.html">
<img src="_static/logo.png" class="logo" style="width: 200px; height: auto; border-radius: 0px 6px 6px 0px;" alt="Logo"/>
</a>
    <div class="version">
      1.6.1
    </div>

<!-- font awesome comes with the rtd package.. use like this:-->

<div class="list-container">
<ul>
<li><a href="https://github.com/elsampsa/valkka-core" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> valkka-core </a></li>
<li><a href="https://github.com/elsampsa/valkka-examples" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> valkka-examples </a></li>
<li><a href="https://github.com/elsampsa/valkka-onvif" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> valkka-onvif </a></li>
<li><a href="https://elsampsa.github.io/valkka-multiprocess/_build/html/index.html" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i> valkka-multiprocess </a></li>
<li><a href="https://github.com/elsampsa/valkka-streamer"target="_blank" rel="noopener noreferrer" ><i class="fab fa-github" ></i> valkka-streamer </a></li>
<!-- li><a href="https://github.com/elsampsa/darknet-python"><i class="fab fa-github"></i> darknet-python </a></li -->
<li><a href="https://github.com/elsampsa/valkka-core/issues" target="_blank" rel="noopener noreferrer"><i class="fas fa-bug"></i> Issue Tracker</a></li>
<li><a href="https://launchpad.net/~sampsa-riikonen/+archive/ubuntu/valkka/+packages" target="_blank" rel="noopener noreferrer"><i class="fas fa-archive"></i> Package Repository</a></li>
<li><a href="https://hub.docker.com/r/elsampsa/valkka" target="_blank" rel="noopener noreferrer"><i class="fab fa-docker"></i> Dockerhub</a></li>
<li><a href="https://elsampsa.github.io/valkka-live/" target="_blank" rel="noopener noreferrer"><i class="fas fa-video"></i> Valkka Live</a></li>
<li><a href="https://discord.com/channels/1116100310574837812/1116101208797609994" target="_blank" rel="noopener noreferrer"> <i class="fa-brands fa-discord"></i> Discord </a> </li>
<!-- li><a href="http://www.dasys.fi"><i class="fas fa-building"></i> Dasys Ltd.</a></li -->
</ul>
</div>
<!-- don't even think about subclassing searchbox.html .. will never work!-->
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">About Valkka</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-this-library">Why this library?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#valkka-api">Valkka API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-project">The Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Supported hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testsuite.html">The PyQt testsuite</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="decoding.html">Decoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="qt_notes.html">Integrating with Qt and multiprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_gpu.html">Multi-GPU systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="valkkafs.html">ValkkaFS</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Cloud Streaming</a></li>
<li class="toctree-l1"><a class="reference internal" href="onvif.html">OnVif &amp; Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="pitfalls.html">Common problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="repos.html">Repository Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licence &amp; Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge.html">Knowledge Base</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python Media Streaming Framework for Linux</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">About Valkka</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/intro.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="intro"></span><section id="about-valkka">
<h1>About Valkka<a class="headerlink" href="#about-valkka" title="Link to this heading"></a></h1>
<section id="why-this-library">
<h2>Why this library?<a class="headerlink" href="#why-this-library" title="Link to this heading"></a></h2>
<p><em>So, yet another media player?  I need to stream video from my IP camera into my python/Qt program and I want something that can be developed fast and is easy to integrate into my code.
What’s here for me?</em></p>
<p>If you just need to stream video from your IP cameras, decode it and show it on the screen, we recommend a standard media player,
say, VLC and its python bindings.</p>
<p>However, if you need to stream video and <em>simultaneously</em> (1) present it on the screen, (2) analyze it with machine vision, (3) write it to disk,
and even (4) recast it to other clients, stock media players won’t do.</p>
<p>Such requirements are typical in large-scale video surveillance, management and analysis solutions.
Demand for them is growing rapidly due to continuous decline in IP camera prices and growing computing power.</p>
<p>As a solution, you might try connect to the <em>same</em> camera 4 times and decode the stream 4 times - but then you’ll burn all that CPU for nothing (you should decode only once).
And try to scale that only to, say, 20+ cameras.  In order avoid too many connections to your IP cameras (this is typically limited by the camera),
you might desperately try your luck even with the multicast loopback.  We’ve been there and it’s not a good idea.
And how about pluggin in your favorite machine vision/learning module, written with OpenCV or TensorFlow?</p>
</section>
<section id="valkka-api">
<h2>Valkka API<a class="headerlink" href="#valkka-api" title="Link to this heading"></a></h2>
<p>Valkka will solve the problem for you; It is a programming library and an API to do just that - large scale video surveillance, management and analysis programs, from the comfort of python3.</p>
<p>With Valkka, you can create complex pipings (“filtergraphs”) of media streams from the camera, to screen, machine vision subroutines, to disk, to the net, etc.  The code runs at the cpp level with threads, thread-safe queues, mutexes, semaphores, etc.  All those gory details are hidden from the API user that programs filtergraphs at the python level only.  Valkka can also share frames between python processes (and from there, with OpenCV, TensorFlow, etc.)</p>
<p>If you got interested, we recommend that you do the <a class="reference internal" href="tutorial.html#tutorial"><span class="std std-ref">tutorial</span></a>, and use it together with the <a class="reference internal" href="testsuite.html#testsuite"><span class="std std-ref">PyQt testsuite</span></a>,
and <a class="reference external" href="https://github.com/elsampsa/valkka-examples/tree/master/example_projects/basic">the example project</a> as starting points for your own project.</p>
<p>This manual has a special emphasis for Qt and OpenCV.  You can create video streaming applications using PyQt: streaming video to widgets, and connect the signals from your machine vision subprograms to the Qt signal/slot system - and beyond.</p>
<p>For more technical information, check out the <a class="reference external" href="https://elsampsa.github.io/valkka-core/html/process_chart.html">library architecture page</a></p>
<p>Finally, here is a small sample from the tutorial.  You’ll get the idea.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">main</span> <span class="n">branch</span><span class="p">,</span> <span class="n">streaming</span>
<span class="p">(</span><span class="n">LiveThread</span><span class="p">:</span><span class="n">livethread</span><span class="p">)</span> <span class="o">--&gt;</span> <span class="o">----------------------------------+</span>
                                                              <span class="o">|</span>
                                                              <span class="o">|</span>
<span class="p">{</span><span class="n">ForkFrameFilter</span><span class="p">:</span> <span class="n">fork_filter</span><span class="p">}</span> <span class="o">&lt;----</span><span class="p">(</span><span class="n">AVThread</span><span class="p">:</span><span class="n">avthread</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="o">---+</span>  <span class="n">main</span> <span class="n">branch</span><span class="p">,</span> <span class="n">decoding</span>
               <span class="o">|</span>
      <span class="n">branch</span> <span class="mi">1</span> <span class="o">+--&gt;&gt;</span> <span class="p">(</span><span class="n">OpenGLThread</span><span class="p">:</span><span class="n">glthread</span><span class="p">)</span> <span class="o">--&gt;</span> <span class="n">To</span> <span class="n">X</span><span class="o">-</span><span class="n">Window</span> <span class="n">System</span>
               <span class="o">|</span>
      <span class="n">branch</span> <span class="mi">2</span> <span class="o">+---&gt;</span> <span class="p">{</span><span class="n">IntervalFrameFilter</span><span class="p">:</span> <span class="n">interval_filter</span><span class="p">}</span> <span class="o">--&gt;</span> <span class="p">{</span><span class="n">SwScaleFrameFilter</span><span class="p">:</span> <span class="n">sws_filter</span><span class="p">}</span> <span class="o">--&gt;</span> <span class="p">{</span><span class="n">RGBSharedMemFrameFilter</span><span class="p">:</span> <span class="n">shmem_filter</span><span class="p">}</span>
                                                                                                                  <span class="o">|</span>
                                                                                              <span class="n">To</span> <span class="n">OpenCV</span>  <span class="o">&lt;--------+</span>
</pre></div>
</div>
</section>
<section id="the-project">
<h2>The Project<a class="headerlink" href="#the-project" title="Link to this heading"></a></h2>
<p>In Valkka, the “streaming pipeline” from IP cameras to decoders and to the GPU has been completely re-thinked and written from scratch:</p>
<ul class="simple">
<li><p>No dependencies on external libraries or x window extensions (we use only glx)</p></li>
<li><p>Everything is pre-reserved in the system memory and in the GPU.  During streaming, frames are pulled from pre-reserved stacks</p></li>
<li><p>OpenGL pixel buffer objects are used for texture video streaming (in the future, we will implement fish-eye projections)</p></li>
<li><p>Customized queueing and presentation algorithms</p></li>
<li><p>etc., etc.</p></li>
</ul>
<p>Valkka is in alpha stage.  Even so, you can do lot of stuff with it - at least all the things we have promised here in the intro.</p>
<p>Repositories are organized as follows:</p>
<p><strong>valkka-core</strong> : the cpp codebase and its python bindings are available at the <a class="reference external" href="https://github.com/elsampsa/valkka-core">valkka-core github repository</a>.  The cpp core library is licensed under LGPL license see <a class="reference internal" href="license.html#licensing"><span class="std std-ref">here</span></a>.</p>
<p><strong>valkka-examples</strong> : the python tutorial and PyQt example/testsuite are available at the <a class="reference external" href="https://github.com/elsampsa/valkka-examples">valkka-examples github repository</a>. MIT licensed.</p>
<p>For more, see <a class="reference internal" href="repos.html#repos"><span class="std std-ref">here</span></a>.</p>
<p>All functional features are demonstrated in the <a class="reference internal" href="tutorial.html#tutorial"><span class="std std-ref">tutorial</span></a> which is updated as new features appear.  Same goes for the <a class="reference internal" href="testsuite.html#testsuite"><span class="std std-ref">PyQt testsuite</span></a>.</p>
<p>Near-term goals for new features are:</p>
<ul class="simple">
<li><p>Interserver communications between Valkka-based server and clients</p></li>
<li><p>ValkkaFS filesystem, designed for recording large amounts of video (not yet fully operational / debugged)</p></li>
<li><p>Synchronized recording of video</p></li>
<li><p>Fisheye projections</p></li>
<li><p>Support for sound</p></li>
</ul>
<p>Valkka is based on the following opensource libraries and technologies:</p>
<div style="overflow: hidden; position: relative;">
  <div style="float: left; margin: 5%; "><a href="http://www.live555.com/">
    <img class="logo" height=100 src="_static/svg/live.svg.png"></a>
    </br> Live555
  </div>
  <div style="float: left; margin: 5% "><a href="https://ffmpeg.org">
    <img class="logo" height=100 src="_static/svg/ffmpeg.svg.png"></a>
    </br> FFmpeg Libav
  </div>
  <div style="float: left; margin: 5% "><a href="https://www.opengl.org/">
    <img class="logo" height=100 src="_static/svg/opengl.svg.png"></a>
    </br> OpenGL
  </div>
</div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Valkka" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hardware.html" class="btn btn-neutral float-right" title="Supported hardware" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2020 Sampsa Riikonen.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>